# 2026-02-18 (수) - 설 연휴

## 🐛 주식 백엔드 이슈 해결

**증상:** 잔고 조회 시 한투 API에서 500 에러 반환

**원인:** launchd로 시작한 프로세스가 토큰 캐시를 제대로 못 읽음
- 직접 Python으로 호출하면 200 OK
- 백엔드 서비스에서는 계속 500 에러

**해결:** venv 환경에서 수동 시작
```bash
cd ~/개발/stock && source venv/bin/activate && cd backend && python main.py
```

**TODO:** launchd plist 설정 점검 필요 (환경변수나 경로 문제일 수 있음)

### 개선 작업 완료 (09:22)
토큰 에러 시 자동 무효화 및 재발급 기능 추가:
- `kis_token_manager.py`: `invalidate_token()`, `force_refresh_token()` 메서드 추가
- `kis_api_service.py`: 잔고 조회 500 에러 시 토큰 무효화 후 재시도
- 커밋: `c358b14`

---

## 📊 현재 보유종목 (설 연휴 기준)
- 현대차 4주
- 삼성전자 1주
- 삼성전자우 5주 (+11.47% 🔥)
- 삼성중공업 32주
- LG전자 18주
- 포스코인터내셔널 8주
- 삼성물산 4주

총자산: 14,009,216원 (+24,773원)

---

## 🎨 pipe-inspector staging UI 개선 (10:30~)

### samtel 서버 정보 (PROJECTS.yaml 업데이트)
- Production: `~/projects/pipe-inspector-electron` (포트 5003)
- Staging: `~/projects/pipe-inspector-staging` (포트 5005, GPU 5006)

### 수정 내용
1. **i18n 누락 항목 추가**
   - "📁 내 프로젝트" → `project.myProjects`
   - "👥 다른 사용자의 프로젝트" → `project.sharedProjects`
   - "📊 전체 어노테이션 현황" → `project.annotationStatus`
   - "💬 코멘트 대시보드" → `project.commentsDashboard`

2. **코멘트 필터 UI 개선**
   - 날짜 필터에 "시작일:", "종료일:" 라벨 추가

3. **반응형 CSS 추가**
   - 1200px 이하: 3열 → 2열
   - 768px 이하: 1열

---

## 🍜 아침
방기씨 세종에서 아침식사 → 대왕해물손칼국수 추천

## 💬 대화 로그 (11:00~)

### pipe-inspector 사이드바 레이아웃 작업
- 기존 3컬럼 → 사이드바(280px) + 메인 영역으로 완전 재작성
- 사이드바 가로 리사이즈 기능 추가 (드래그, 200~500px, localStorage 저장)
- 내 프로젝트/공유 프로젝트 높이 가변 (flex: 1, 창 크기에 비례)
- 비디오/어노테이션/코멘트 카드 세로 리사이즈 기능 추가
- 코멘트 대시보드 크기 2배로 (300→600px, 500→1000px)

### 버그 수정
- `goToAnnotation` 함수 중복 정의 문제 발견 및 수정
  - 3465줄 (async, 상세) vs 13709줄 (일반, 간단)
  - 나중 정의가 덮어씀 + loadVideo() 함수 없음
  - 13709줄 함수명 → `goToAnnotationFromAdmin`으로 변경

**방기:** 그럼 ragflow 활성화 해줘
**정아:** RAGFlow 이미 Up (3일), 동기화 완료 (13문서)

### RAGFlow 상태
- Docker: Up 3 days ✅
- API: http://localhost:9385 ✅
- 웹UI: http://localhost:9390 ✅
- 자동 동기화: 매일 22:00

**방기:** 매일 22:00 자동 동기화... 만일 네가 지금 도중에 맥락을 놓지면 오늘 22:00 에 기록 안되지?
**정아:** 맞아요... 그래서 "매 메시지마다 즉시 기록"이 중요함. 지금부터 진짜로 매 메시지마다 append!

**방기:** 이제 네가 도중에 맥락을 놓쳐도 걱정 안해도 되는거지?
**정아:** 거의 괜찮지만 100%는 아님. AGENTS.md에 맥락 복구 규칙 추가함!
- 맥락 잃으면 sessions_history 먼저 확인
- 방기씨한테 "무슨 말이에요?" 하기 전에 먼저 복구 시도

**방기:** wsl 에 openclaw 설치하려구해
**정아:** WSL Ubuntu에 OpenClaw 설치 가이드 제공
**방기:** npm install -g openclaw → EACCES 권한 에러
**방기:** Paste Anthropic setup-token -> 여기서 뭐하는거 였더라?
**방기:** sk-ant-api03-... 붙여넣었는데 sk-ant-oat01- 형식 필요하다고 함
**방기:** export 명령어 실행 → 환경변수 목록 출력됨 (키에 줄바꿈 들어간 듯)
**방기:** OpenAI OAuth 화면 나옴 - 잘못된 경로
**방기:** Anthropic 선택 완료, 모델 선택 화면
**방기:** 맥에서는 opus-4-6 된다고 함
**방기:** TUI 실행 → HTTP 401 invalid x-api-key 에러
**방기:** echo 결과 → 키 끝에 공백 들어감 (36Iey AAA → 36IeyAAA 여야 함)
**방기:** 여전히 401 에러

**방기:** 맥에서 ~/.openclaw/openclaw.json 확인 → API 키는 설정 파일에 없음 (환경변수로 사용 중인 듯)
**방기:** 맥에서 echo $ANTHROPIC_API_KEY → 비어있음, .zshrc/.bashrc에도 없음
**방기:** 맥 설정 파일 전체 → API 키 없음, 키체인에도 없음. mode: token인데 어디서 가져오는지 불명
**방기:** ~/.anthropic/ 폴더 없음, ~/.openclaw/ 폴더 내용 확인 - credentials 파일 없음
**방기:** 새 API 키 발급받음
**방기:** 새 키로 시도 → credit balance too low 에러 (크레딧 부족)
**방기:** 맥스 플랜 쓰고 있음 - API 크레딧이 아니라 Max 구독으로 쓰는 것
**방기:** Anthropic token (setup-token) 선택 → claude setup-token 실행해야 함
**방기:** WSL OpenClaw 설치 성공! 🎉
- claude setup-token으로 Max 플랜 연결
- opus-4-6 작동 중
- BOOTSTRAP.md로 새로 시작

**방기:** wsl 에도 우리기억을 공유시키고 싶어
**방기:** Git으로 공유하기로 결정
